"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const koishi_1 = require("koishi");
class Translator extends koishi_1.Service {
    constructor(ctx, config) {
        super(ctx, 'translator', true);
        this.config = config;
        ctx.i18n.define('zh-CN', require('./locales/zh-CN'));
        ctx.command('translate <text:text>')
            .userFields(['locales'])
            .channelFields(['locales'])
            .option('source', '-s <lang>')
            .option('target', '-t <lang>')
            .action(async ({ options, session }, input) => {
            if (!input)
                return session.text('.expect-input');
            const { source, target } = options;
            const result = { input, source, target, detail: true };
            result.output = await this.translate(result);
            return session.text('.output', result);
        });
    }
}
exports.default = Translator;
